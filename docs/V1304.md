V1304 – PWA Installability Patch
Status: Approved
Scope: Locked
Drift: Not permitted
Version: 1304
Feature: Fix PWA installability by correcting icons and adding required manifest fields
Depends On:

V901 – PWA Install Prompt System

V1100 – Landing Page Install CTA

V1300 – Premium Landing Page

V1302 – Unified Routing + Shop

V1303 – Install Button Wiring Patch

1. Overview
V1304 restores full PWA installability by fixing the manifest and static assets.
The install prompt is currently blocked because:

Declared icon sizes do not match actual PNG sizes

No icon ≥ 144px exists

No maskable icon exists

No screenshots are defined

Manifest warnings prevent Rich Install UI

These issues prevent the browser from firing the beforeinstallprompt event, causing the install button to fail even though V1303 wiring is correct.

V1304 resolves all installability errors.

2. Requirements
2.1 Mandatory Fixes
The following must be corrected:

Provide correctly sized icons

144×144

192×192

512×512

512×512 maskable

Update manifest to reference correct icon sizes

Ensure all icons are real PNGs with matching pixel dimensions

Add screenshots to manifest  
Using existing assets:

Code
static/screenshots/landing/bonusGames.png
static/screenshots/landing/dealButton.png
static/screenshots/landing/WelcomeBack.png
Declare accurate screenshot sizes (296×640)

Add at least one screenshot with form_factor: "wide"

Ensure manifest loads without errors in DevTools → Application → Manifest

2.2 Optional but Recommended
Add id field

Add display_override

Add maskable icon with correct padding

These improve install UX but do not affect installability.

3. Implementation Details
3.1 Required Icon Files
Place these in /static/:

Filename	Size	Purpose
icon-144.png	144×144	Required
icon-192.png	192×192	Required
icon-512.png	512×512	Required
icon-maskable.png	512×512	Recommended
3.2 Manifest Icons Block
Replace existing icons with:

json
"icons": [
  {
    "src": "/icon-144.png",
    "sizes": "144x144",
    "type": "image/png",
    "purpose": "any"
  },
  {
    "src": "/icon-192.png",
    "sizes": "192x192",
    "type": "image/png",
    "purpose": "any"
  },
  {
    "src": "/icon-512.png",
    "sizes": "512x512",
    "type": "image/png",
    "purpose": "any"
  },
  {
    "src": "/icon-maskable.png",
    "sizes": "512x512",
    "type": "image/png",
    "purpose": "maskable"
  }
]
3.3 Manifest Screenshots Block
Add:

json
"screenshots": [
  {
    "src": "/screenshots/landing/bonusGames.png",
    "sizes": "296x640",
    "type": "image/png",
    "form_factor": "wide"
  },
  {
    "src": "/screenshots/landing/dealButton.png",
    "sizes": "296x640",
    "type": "image/png"
  },
  {
    "src": "/screenshots/landing/WelcomeBack.png",
    "sizes": "296x640",
    "type": "image/png"
  }
]
3.4 Additional Recommended Fields
Add:

json
"id": "/",
"display_override": ["standalone"]
4. File Changes
Modified Files
Code
static/icon-144.png
static/icon-192.png
static/icon-512.png
static/icon-maskable.png
static/screenshots/landing/*.png
static/manifest.webmanifest
No New Routes
No New Components
No UI Changes
No Logic Changes
5. Verification
Before marking V1304 complete, confirm:

5.1 Manifest
No red errors in DevTools → Application → Manifest

All icons show correct sizes

Screenshots appear in the manifest preview

5.2 Service Worker
Service worker is active

Page is within SW scope

5.3 Installability
DevTools → Application → Manifest → Installability:

All checks green

“Install” button appears in browser UI

beforeinstallprompt event fires

deferredPrompt is non‑null

5.4 Shop Install Button
Install button triggers real PWA install prompt

After installation, /shop unlocks

6. Deliverables
Updated manifest

Correctly sized icons

Added screenshots

Zero installability errors

Install prompt firing

Shop unlocking after install