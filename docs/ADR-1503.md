# **ADR‑1503: Progression Modal & Leaderboard Integration**

## **Context**
ADR‑1500 defined the overall Heads‑Up Hold’em Ladder Mode as a deterministic, modal‑contained feature inside the Ace‑Token Shop. ADR‑1501 established the betting engine and blind‑shrink ladder, and ADR‑1502 defined the CPU AI system with five opponents of increasing difficulty.

The ladder requires a **visual progression system** so players can see which CPU opponents are unlocked, how many wins remain before the next unlock, and what difficulty lies ahead. Additionally, the Ace‑Token ecosystem benefits from a **local leaderboard** that blends CPU “career stats” with the player’s own results to create a natural, competitive environment without multiplayer infrastructure.

This ADR defines the UI, data structures, and integration logic for both the **Progression Modal** and the **Leaderboard**.

---

## **Decision**
Implement two new UI components inside the Ace‑Token Shop:

### **1. Progression Modal**
A dedicated modal showing:
- All five CPU opponents in ladder order  
- Portraits (placeholder images allowed initially)  
- Locked/unlocked states  
- Win progress (0/5 per opponent)  
- Difficulty indicators  
- Short bios and personality summaries  
- A “Next Opponent” highlight  

This modal is accessible from:
- The Ace‑Token Shop  
- The Heads‑Up Hold’em modal  
- The post‑match results screen  

### **2. Local Leaderboard**
A leaderboard stored client‑side showing:
- Player’s Ace‑Token winnings  
- Player’s streaks  
- CPU “career stats” (fake but deterministic)  
- CPU difficulty tiers  
- Player’s rank among CPUs  

The leaderboard is not global and requires no server.

Both systems must be deterministic, lightweight, and fully contained within the existing UI framework.

---

## **Progression Modal Structure**

### **Layout**
A vertical or horizontal ladder layout showing:

1. **TheNorm — Tier 1 (Very Easy)**  
2. **AnyAceNick — Tier 2 (Easy)**  
3. **RedTheRiot — Tier 3 (Medium)**  
4. **CrazyHorse — Tier 4 (Hard)**  
5. **MrMark — Tier 5 (Very Hard)**  

Each entry includes:
- Portrait  
- Name  
- Tier label  
- Difficulty stars  
- Bio snippet  
- Progress bar (e.g., “3/5 wins”)  
- Lock overlay if not yet unlocked  

### **Unlock Logic**
- Player must defeat each CPU **five times** to unlock the next.  
- Progress is stored in local save data.  
- Unlocks are permanent.  

### **Modal Actions**
- “View Opponent” (shows full bio + stats)  
- “Start Match” (if unlocked)  
- “Return to Shop”  

This modal acts as the campaign map for the ladder.

---

## **Leaderboard Structure**

### **Entries**
Leaderboard entries include:
- Name (player or CPU)  
- Portrait  
- Total Ace‑Tokens won  
- Win streak  
- Difficulty tier  
- “Career stats” (for CPUs)  

### **CPU Stats**
CPU stats are deterministic and pre‑generated:
- Total Ace‑Tokens won  
- Win rate  
- Biggest pot won  
- Streak record  

These values are flavour only and do not affect gameplay.

### **Player Stats**
Player stats update after each match:
- Ace‑Tokens won/lost  
- Streaks  
- Highest tier beaten  
- Fastest win time (optional)  

### **Ranking**
The leaderboard sorts by:
1. Total Ace‑Tokens won  
2. Streak  
3. Tier  

The player can climb above CPUs, creating a natural sense of competition.

---

## **Integration Points**

### **With ADR‑1501 (Betting Engine)**
- After each match, the engine reports win/loss and Ace‑Token delta.  
- Progression modal updates win count.  
- Leaderboard updates player stats.  

### **With ADR‑1502 (AI System)**
- Modal displays CPU bios and difficulty.  
- Leaderboard displays CPU stats.  

### **With Ace‑Token Shop**
- Entry cost deducted before match.  
- Rewards added after match.  
- Progression modal accessible from shop.  

---

## **Data Structures**

### **Progression Data**
```
{
  theNormWins: number,
  anyAceNickWins: number,
  redTheRiotWins: number,
  crazyHorseWins: number,
  mrMarkWins: number
}
```

### **Leaderboard Data**
```
[
  {
    name: string,
    portrait: string,
    tokensWon: number,
    streak: number,
    tier: number,
    isPlayer: boolean
  }
]
```

Stored in local save.

---

## **Rationale**
This approach:
- Creates a clear, motivating progression loop  
- Makes the world feel alive without multiplayer  
- Strengthens the Ace‑Token economy  
- Reuses existing modal and UI systems  
- Requires no server or networking  
- Keeps everything deterministic and testable  
- Adds personality and flavour to the game  

It also sets the stage for future expansions (new CPUs, daily challenges, Limit mode).

---

## **Consequences**

### Positive
- Strong player motivation  
- High replay value  
- Natural difficulty curve  
- Lightweight implementation  
- No architectural risk  
- Fully client‑side  

### Negative
- Requires new UI assets (portraits)  
- Requires tuning to keep progression satisfying  
- Leaderboard is local only (not global)  

---

## **Status**
**Accepted.**  
Next optional ADR: **ADR‑1504 (Ace‑Token Economy Integration)** if deeper economic tuning is required.
