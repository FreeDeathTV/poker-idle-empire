V1303 – Shop Install Button Wiring Patch
Status: Approved
Scope: Locked
Drift: Not permitted
Version: 1303
Feature: Wire “Install App” button on /shop to existing PWA install logic
Depends On:

V901 – PWA Install Prompt System

V1100 – Landing Page & Install CTA

V1300 – Premium Landing Page

V1301 – Demo Mode

V1302 – Unified Routing + Shop Route

1. Overview
V1303 is a micro‑patch that wires the “Install App” button on the /shop route to the existing PWA install logic.

The install system already exists and is fully implemented in:

InstallPrompt.svelte

InstallSection.svelte

InstallToSaveBanner.svelte

However, the Shop page currently displays a static “Install App” button that is not connected to the install handler.
This prevents users from installing the PWA directly from the shop, blocking access to the full shop experience.

V1303 fixes this by reusing the existing install logic — no new install code is created.

2. Requirements
2.1 Behaviour
When the user taps the “Install App” button on /shop:

The existing beforeinstallprompt event must be triggered

The stored deferredPrompt must be used

The real PWA install prompt must appear

After installation, the shop must automatically unlock (as defined in V1302)

2.2 No New Logic
This version must not:

Add new install logic

Add new stores

Add new components

Modify the PWA manifest

Modify service worker behaviour

Modify routing

Modify demo/full logic

Modify shop UI

Modify landing UI

Only wire the button.

3. Implementation Details
3.1 Reuse Existing Install Logic
The Shop page must reuse one of the following:

Option A (Preferred):
InstallPrompt.svelte  
Embed the component directly inside the locked shop state.

Option B:
Reuse the install store used by InstallToSaveBanner.svelte.

3.2 Button Behaviour
The button must call:

Code
deferredPrompt.prompt()
Where deferredPrompt is the stored beforeinstallprompt event.

3.3 Unlocking the Shop
After installation:

display-mode: standalone becomes true

The shop automatically switches to the full shop grid (as defined in V1302)

No additional logic is required

4. File Changes
Modified Files
Code
src/routes/shop/+page.svelte
No New Files
No new components, stores, or routes may be created.

5. Verification
Before marking V1303 complete, confirm:

5.1 Install Prompt
Tapping “Install App” triggers the real PWA install prompt

The prompt appears only when install is available

No errors in console

5.2 Post‑Install Behaviour
After installation, /shop shows the full shop state

No locked banner appears

Ace Token pill → /shop still works

Landing page Ace Token Hub → /shop still works

5.3 No Drift
No UI changes

No routing changes

No new logic

No new files

No changes to demo/full behaviour

6. Deliverables
Confirmation that the Shop Install button triggers the PWA install prompt

Confirmation that the shop unlocks after installation

List of modified files (should be only one)

No additional commentary