# **ADR‑1502: CPU AI Profiles & Behaviour System**

## **Context**
ADR‑1500 established the Heads‑Up Hold’em Ladder Mode as a deterministic, modal‑contained feature inside the Ace‑Token Shop. ADR‑1501 defined the betting engine, blind ladder, and state machine required to support two‑player No‑Limit Hold’em.

This ADR defines the **CPU AI system** that powers the five ladder opponents:

- TheNorm — Tier 1 (Very Easy)  
- AnyAceNick — Tier 2 (Easy)  
- RedTheRiot — Tier 3 (Medium)  
- CrazyHorse — Tier 4 (Hard)  
- MrMark — Tier 5 (Very Hard)  

The AI must be deterministic, lightweight, and compatible with the shallow‑stack structure (10BB → 1BB). It must also support personality‑driven behaviour that feels distinct without requiring complex solvers or probabilistic engines.

---

## **Decision**
Implement a **parameter‑driven AI behaviour system** where each CPU opponent is defined by a small set of weighted attributes. These attributes influence decision‑making at each betting round, allowing each CPU to exhibit a unique personality while remaining predictable and testable.

The AI system will be:

- Fully client‑side  
- Deterministic  
- Seed‑driven for controlled randomness  
- Lightweight (no tree search, no simulations)  
- Integrated directly with the betting engine from ADR‑1501  

Each CPU opponent will be defined by a **profile object** containing:

- Aggression  
- Bluff frequency  
- Call frequency  
- Raise frequency  
- Hand strength threshold  
- Optional: exploit flags (for MrMark)  

These values drive the AI’s action selection at each decision point.

---

## **AI Attribute Model**
Each CPU opponent uses the same five core attributes:

- **Aggression** — Likelihood to bet/raise instead of check/call.  
- **Bluff frequency** — Likelihood to bet/raise with weak hands.  
- **Call frequency** — Likelihood to call bets with marginal hands.  
- **Raise frequency** — Likelihood to escalate the pot when ahead.  
- **Hand strength threshold** — Minimum hand strength required to continue.  

Hand strength is evaluated using existing hand evaluation logic, normalized to a 0–100 scale.

These attributes are combined with:

- Current street (preflop/flop/turn/river)  
- Stack depth (shallow stacks = more all‑ins)  
- Pot size  
- Player action (exploit opportunities)  

This produces a deterministic action.

---

## **CPU Profiles (Final Ladder Order)**

### **Tier 1 — TheNorm (Donkey / Very Easy)**
- Aggression: 10  
- Bluff frequency: 5  
- Call frequency: 90  
- Raise frequency: 5  
- Threshold: 15  

**Behaviour:**  
Plays any two cards, calls too much, rarely raises, almost never bluffs. Designed to be beaten easily.

---

### **Tier 2 — AnyAceNick (Loose‑Passive / Easy)**
- Aggression: 25  
- Bluff frequency: 10  
- Call frequency: 75  
- Raise frequency: 20  
- Threshold: 30  

**Behaviour:**  
Overvalues Ax hands, calls too light, weak postflop discipline.

---

### **Tier 3 — RedTheRiot (TAG / Medium)**
- Aggression: 50  
- Bluff frequency: 15  
- Call frequency: 40  
- Raise frequency: 45  
- Threshold: 50  

**Behaviour:**  
Disciplined tight‑aggressive style. Folds weak hands, bets strong ones, punishes loose play.

---

### **Tier 4 — CrazyHorse (LAG / Hard)**
- Aggression: 85  
- Bluff frequency: 35  
- Call frequency: 30  
- Raise frequency: 80  
- Threshold: 40  

**Behaviour:**  
Wild, unpredictable, hyper‑aggressive. Shoves light, bluffs often, forces tough decisions.

---

### **Tier 5 — MrMark (TAG+GTO Hybrid / Very Hard)**
- Aggression: 70  
- Bluff frequency: 25  
- Call frequency: 45  
- Raise frequency: 65  
- Threshold: 60  
- Exploit flags:  
  - Punish over‑folding  
  - Reduce bluffs if called down  
  - Increase aggression if player limps too often  

**Behaviour:**  
Final boss. Balanced, mixes bluffs, adapts to patterns, rarely makes big mistakes.

---

## **AI Decision Flow**
At each decision point:

1. **Evaluate hand strength** (0–100).  
2. **Check stack depth** (shallow = shove‑heavy).  
3. **Check opponent action** (fold/call/raise).  
4. **Apply personality weights**.  
5. **Apply randomness using seeded RNG**.  
6. **Select action** (fold/call/raise/all‑in).  

This ensures:

- Predictability  
- Replayability  
- Distinct personalities  
- No infinite loops  
- No solver‑level complexity  

---

## **Integration Points**
The AI system integrates with:

- Betting engine (ADR‑1501)  
- Progression modal (ADR‑1503)  
- Leaderboard (ADR‑1503)  
- Ace‑Token economy (ADR‑1504 if needed)  

The AI exposes:

- `getAction(cpu, gameState)`  
- `getRaiseAmount(cpu, gameState)`  
- `shouldBluff(cpu, gameState)`  

---

## **Rationale**
This approach:

- Keeps the AI lightweight and deterministic  
- Allows distinct personalities without complex logic  
- Fits the modal‑contained architecture  
- Supports the ladder progression system  
- Works perfectly with shallow stacks and blind shrink  
- Requires minimal CPU overhead  

It avoids the complexity of real poker solvers while still feeling natural and varied.

---

## **Consequences**
### Positive
- Easy to tune and expand  
- Supports new CPUs in future updates  
- Deterministic and testable  
- Works with existing card logic  
- Creates strong personality differentiation  

### Negative
- Not suitable for deep‑stack play  
- Not a true solver (not GTO‑accurate)  
- Requires careful tuning to avoid predictable patterns  

---

## **Status**
**Accepted.**  
Implementation proceeds to ADR‑1503 (Progression Modal & Leaderboard Integration).

---
